(this.webpackJsonpaaa=this.webpackJsonpaaa||[]).push([[0],{25:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(4),r=n.n(c),s=n(15),i=n.n(s),u=n(10),o=n.n(u),l=n(14),d=n(9),b=n(11);n(26),n(23);b.a.initializeApp({apiKey:"AIzaSyBFEN6uRUrMJrp5mZFfjLDUQXv4nYNxe8s",authDomain:"chatreact-8c123.firebaseapp.com",projectId:"chatreact-8c123",storageBucket:"chatreact-8c123.appspot.com",messagingSenderId:"621514421192",appId:"1:621514421192:web:ab766d229b2f147ffe06fd"});var j=b.a.firestore(),p=b.a.auth(),h=new b.a.auth.GoogleAuthProvider,f=r.a.createContext(),m=function(e){var t=r.a.useState({uid:null,email:null,state:null}),n=Object(d.a)(t,2),c=n[0],s=n[1],i=r.a.useState([]),u=Object(d.a)(i,2),b=u[0],m=u[1];r.a.useEffect((function(){x()}),[]);var x=function(){p.onAuthStateChanged((function(e){e?(s({uid:e.uid,email:e.email,state:!0}),v()):s({uid:null,email:null,state:!1})}))},g=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.signInWithPopup(h);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),v=function(){j.collection("chat").orderBy("fecha").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));m(t)}))},O=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.collection("chat").add({fecha:Date.now(),texto:n,uid:t,email:c.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)(f.Provider,{value:{user:c,userLogin:g,loginOut:function(){p.signOut()},message:b,addMessage:O},children:e.children})},x=function(){var e=r.a.useContext(f),t=e.user,n=e.userLogin,c=e.loginOut;return Object(a.jsxs)("nav",{className:"navbar navbar-dark bg-dark container",children:[Object(a.jsx)("span",{className:"navbar-brand",children:"Chat"}),Object(a.jsx)("div",{children:t.state?Object(a.jsx)("button",{onClick:c,className:"btn btn-outline-danger my-2",children:"Sign off"}):Object(a.jsx)("button",{onClick:n,className:"btn btn-outline-success my-2",children:"Sign in"})})]})},g=function(){var e=r.a.useContext(f),t=e.addMessage,n=e.user,c=r.a.useState(""),s=Object(d.a)(c,2),i=s[0],u=s[1];return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i.trim()?(t(n.uid,i),u("")):console.log("it comes empty")},className:"fixed-bottom input-group p-3 bg-dark container",children:[Object(a.jsx)("input",{value:i,onChange:function(e){return u(e.target.value)},type:"text",className:"form-control"}),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Send"})})]})},v=function(){var e=r.a.useContext(f),t=e.message,n=e.user,c=r.a.useRef(null);return r.a.useEffect((function(){c.current.scrollTop=c.current.scrollHeight}),[t]),Object(a.jsxs)("div",{className:"mt-3 px-2 container",style:{height:"75vh",overflowY:"scroll"},ref:c,children:[t.map((function(e,t){return n.uid===e.uid?Object(a.jsxs)("div",{className:"d-flex justify-content-end mb-2",children:[Object(a.jsx)("span",{className:"badge rounded-pill bg-danger",children:e.email}),Object(a.jsx)("span",{children:"---"}),Object(a.jsx)("span",{className:"badge rounded-pill bg-primary",children:e.texto})]},t):Object(a.jsxs)("div",{className:"d-flex justify-content-start mb-2",children:[Object(a.jsx)("span",{className:"badge rounded-pill bg-danger",children:e.email}),Object(a.jsx)("span",{children:"---"}),Object(a.jsx)("span",{className:"badge rounded-pill bg-secondary",children:e.texto})]},t)})),Object(a.jsx)(g,{})]})},O=function(){var e=r.a.useContext(f).user;return null!==e?Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{}),e.state?Object(a.jsx)(v,{}):Object(a.jsx)("div",{className:"lead text-center mt-5",children:"Log In !!!!"})]}):Object(a.jsx)("div",{children:"Cargando..."})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(m,{children:Object(a.jsx)(O,{})})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.08098051.chunk.js.map